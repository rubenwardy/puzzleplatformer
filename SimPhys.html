<!DOCTYPE html>
<!--
  PUZZLE PLATFORM
    by Andrew Ward (anjayward@gmail.com)
    (c) All rights reserved
    You may not modify, redistribute, sell,
    license this product in anyway.

    Copyrights to scripts and resources
    in assets/libraries are owned by other people
-->
<head>
	<title>Puzzle Platform</title>
	<style>
		html,body{
			margin: 0;
			padding: 0;
			font-family: "Arial", sans-serif;
			background: url('bg_trans.png');
		}
		#canvas{
			position: absolute;
			top:0;
			right:0;
			bottom:0;
			left:0;
		}
	</style>

	<!-- Libraries -->
	<script type="application/javascript" src="assets/libraries/SimplePhysics.js"></script>
	<script type="application/javascript" src="assets/libraries/jQuery.min.js"></script>
</head>
<body>
	<canvas id="canvas"></canvas>
	<script>
	var game = {fps:{}};
	function init(){
		game.ce = document.getElementById("canvas");
		game.c = game.ce.getContext("2d");
		game.ce.width = $(window).width();
		game.ce.height = $(window).height();		
		setInterval(tick,1000/60);
		
		SimPhys.init(9.81);
		game.player = new SimPhys.Body(new SimPhys.Rect(0,0,0.5,1), new SimPhys.Vector(8.5, 2));
		new SimPhys.SceneOBJ(new SimPhys.Rect(0,0,10,1), new SimPhys.Vector(0, 5));
		new SimPhys.SceneOBJ(new SimPhys.Rect(0,0,1,3), new SimPhys.Vector(9, 2));
	}

	function tick(){
		game.ce.width = $(window).width();
		game.ce.height = $(window).height();
		
		SimPhys.debugDraw(game.c, 64);
		SimPhys.step(1/60);
		var rect = game.player.getRect();
		//game.player.move(1/60,new SimPhys.Vector(3,0), SimPhys.math.clipRect(rect,0,0.01,0,-0.02));
			
		// Time settings	
		var end = new Date().getTime();
		game.fps.dtime = Math.round(end - game.fps.last_tick);
		if (game.fps.dtime > 1000)
			game.fps.dtime = 1000;
		game.fps.last_tick = end;
	}
	init();
	</script>
</body>